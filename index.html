<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./CSS.css">
</head>
<body>
    <div class="navigation">
        <img src="./images/4.jpg" />
        <div class="navcon1">
            <div>首页</div>
            <div>榜单</div>
            <div>歌手</div>
        </div>
        <div class="down1">下载酷我客户端</div>
        <div class="navcon2">
            <div>
            <div class="bg"></div>
            <span>美女秀</span>
            </div>
            <div>
            <div class="bg"></div>
            <span>酷我耳机</span>
            </div>
            <div>
            <div class="bg"></div>
            <span>VIP会员</span>
            </div>
            <div>
            <div class="bg"></div>
            <span>i听</span>
            </div>
            <div>更多服务</div>
            <div>登录</div>
        </div>
        <div class="navcon3">
            <div>^</div>
            <div>找到好音乐</div>
        </div>
    </div>
    <div class="song">
        <div class="sname">
            喜羊羊
        </div>
        <div class="shead">
            <span>专辑：</span>
            <span>儿歌大全&nbsp;&nbsp;</span>
            <span>歌手：</span>
            <span>华语群星 &nbsp;&nbsp;</span>
            <span>分享 &nbsp;&nbsp;</span>
            <img src="./images/2.jpg" />
            <span> &nbsp;&nbsp;评论</span>
            <br>
            <span>上传时间：2015-10-02 歌曲来源：民大相思湖网球社</span>
        </div>
        <hr>
        <div class="ssong">
            喜羊羊美羊羊懒羊羊沸羊羊<br>
            慢羊羊软绵绵红太狼灰太狼<br>
            别看我只是一只羊<br>
            绿草因为我变的更香<br>
            天空因为我变的更蓝<br>
            白云因为我变的柔软<br>
            别看我只是一只羊<br>
            羊儿的聪明难以想像<br>
            天再高心情一样奔放<br>
            每天都追赶太阳<br>
            <div id="now">有什么难题去牵绊我都不会去心伤</div>
            有什么危险在我面前也不会去慌乱<br>
            就算有狼群把我追捕也当做游戏一场<br>
            在什么时间都爱开心笑容都会飞翔<br>
            就算会摔倒站得起来永远不会沮丧<br>
            在所有天气拥有叫人大笑的力量<br>
            虽然我只是羊<br>
            喜羊羊美羊羊懒羊羊沸羊羊<br>
            慢羊羊软绵绵红太狼灰太狼<br>
            别看我只是一只羊<br>
            羊儿的聪明难以想像<br>
            天再高心情一样奔放<br>
            每天都追赶太阳<br>
            有什么难题去牵绊我都不会去心伤<br>
            有什么危险在我面前也不会去慌乱<br>
            就算有狼群把我追捕也当做游戏一场<br>
            在什么时间都爱开心笑容都会飞翔<br>
            就算会摔倒站得起来永远不会沮丧<br>
            在所有天气拥有叫人大笑的力量<br>
            虽然我只是羊<br>
            有什么难题去牵绊我都不会去心伤<br>
            有什么危险在我面前也不会去慌乱<br>
            就算有狼群把我追捕也当做游戏一场<br>
            在什么时间都爱开心笑容都会飞翔<br>
            就算会摔倒站得起来永远不会沮丧<br>
            在所有天气拥有叫人大笑的力量<br>
            虽然我只是羊<br>
        </div>
    </div>
    <div class="record">
        <div class="rbg">
            <div></div>
            <div></div>
        </div>
    </div>
    <div class="audio">
        <button class="pause" id="pause"></button>
        <audio id="audio"><source src="./cartoon .mp3" type="audio/mp3"></audio>
        <div class="bar" id="bar"></div>
        <div class="progress-bar" id="progress-bar"></div>
        <div class="spot" id="spot"></div>
        <div class="duration" id="duration">00:00</div>
        <button class="sound" id="sound"></button>
    </div>
    <div class="download">
        <div></div>
        <div>免费下载这首歌</div>
    </div>
    <div class="music">
        <div class="guoz1"></div>
        <div class="guoz2">
            <span>郭子仪——H5班</span>
            <img src="./images/gif.gif" />
            <span>喜羊羊与灰太狼</span>
            <span>去现场 ></span>
        </div>
    </div>

    <div class="commentArea">
        <div>评论&nbsp;&nbsp;&nbsp;&nbsp;1703条评论</div>
        <hr>
        <div class="talk">
            <img src="./images/9.jpg" />
            <div class="texta">
                <textarea cols="100" rows="10" placeholder="分享你的音乐见解" class="text textc" id="text"></textarea>
            </div>
            <img src="./images/10.png" />
            <div>已输入0个字</div>
            <button class="text cbtn" id="cbtn">评论</button>
        </div>
        <div class="good">精彩评论</div>
        <hr>
        <div class="comment1 com">
            <img src="./images/9.jpg" />
            <span>郭子仪</span>
            <span>分享</span>
            <span id="com1"></span>
            <span id="time1"></span>
            <span>删除</span>
            <span>163</span>
            <img src="./images/11.jpg" />
            <span>回复</span>
        </div>
        <hr>
        <div class="comment2 com">
            <img src="./images/9.jpg" />
            <span>郭子仪</span>
            <span>分享</span>
            <span id="com2"></span>
            <span id="time2"></span>
            <span>删除</span>
            <span>163</span>
            <img src="./images/11.jpg" />
            <span>回复</span>
        </div>
        <hr>
        <div class="comment3 com">
            <img src="./images/9.jpg" />
            <span>郭子仪</span>
            <span>分享</span>
            <span id="com3"></span>
            <span id="time3"></span>
            <span>删除</span>
            <span>163</span>
            <img src="./images/11.jpg" />
            <span>回复</span>
        </div>
        <hr>
        <div class="paging">
            <span><</span>
            <span>1</span>
            <span>2</span>
            <span>3</span>
            <span>...</span>
            <span>17</span>
            <span>></span>
        </div>
    </div>
</body>
<script>
    var audio = document.getElementById("audio");
    var pause = document.getElementById("pause");
    pause.onclick = function(){
        if(audio.paused == true){
            pause.className = "play";
            audio.play();
        }
        else{
            pause.className = "pause";
            audio.pause();
        }
    }
    var duration = document.getElementById("duration");
    var spot = document.getElementById("spot");
    var progress = document.getElementById("progress-bar");
    var barLong = document.getElementById("bar").offsetWidth;
    setInterval(() => {
        var t = audio.duration;
        if(isNaN(t) == true){
            t = 168;
        }
        var s = parseInt(audio.currentTime); 
        if((s%60)<10){
            duration.innerHTML = "0"+parseInt(s/60)+":0"+s%60;
        }
        else{
            duration.innerHTML = "0"+parseInt(s/60)+":"+s%60;
        }
        spot.style.left = 52 + parseFloat((s/t)*barLong) + "px";
        progress.style.width = parseFloat((s/t)*barLong) + "px";
    }, 500);
    var sound = document.getElementById("sound");
    sound.onclick = function(){
        if(audio.muted == false){
            sound.className = "not";
            audio.muted = true;
        }
        else{
            sound.className = "sound";
            audio.muted = false;
        }
    }

    var t = [];
    for(var i = 0; i<localStorage.length; i++){
        var d = new Date(localStorage.key(i));
        t.push(d.getTime());
    }
    var temp;
    for(var i = 0; i<t.length-1; i++){
        for(var j = t.length-1; j>0; j--){
            if(t[j]<t[j-1]){
                temp = t[j];
                t[j] = t[j-1];
                t[j-1] = temp;
            }
        }
    }
    var text = document.getElementById("text");
    var cbtn = document.getElementById("cbtn");
    var com1 = document.getElementById("com1");
    var com2 = document.getElementById("com2");
    var com3 = document.getElementById("com3");
    var time1 = document.getElementById("time1");
    var time2 = document.getElementById("time2");
    var time3 = document.getElementById("time3");
    var length = t.length;
    if(length>0){
        com1.innerHTML = localStorage.getItem(timestampToTime(t[length-1]));
        time1.innerHTML = timestampToTime(t[length-1]);
    }
    if(length>1){
        com2.innerHTML = localStorage.getItem(timestampToTime(t[length-2]));
        time2.innerHTML = timestampToTime(t[length-2]);
    }
    if(length>2){
        com3.innerHTML = localStorage.getItem(timestampToTime(t[length-3]));
        time3.innerHTML = timestampToTime(t[length-3]);
    }

    function timestampToTime(timestamp) {
        var date = new Date(timestamp);
        var Y = date.getFullYear() + '-';
        var M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';
        var D = date.getDate() + ' ';
        var h = date.getHours() + ':';
        var m = date.getMinutes() + ':';
        var s = date.getSeconds();
        return Y+M+D+h+m+s;
    }
    cbtn.onclick = function(){
        var com = text.value;
        var time = new Date().getTime();
        var date = timestampToTime(time);
        localStorage.setItem(date,com);
        t.push(time);
        var temp;
        for(var i = 0; i<t.length-1; i++){
            for(var j = t.length-1; j>0; j--){
                if(t[j]<t[j-1]){
                    temp = t[j];
                    t[j] = t[j-1];
                    t[j-1] = temp;
                }
            }
        }
        length = t.length;
        com1.innerHTML = localStorage.getItem(timestampToTime(t[length-1]));
        time1.innerHTML = timestampToTime(t[length-1]);
        com2.innerHTML = localStorage.getItem(timestampToTime(t[length-2]));
        time2.innerHTML = timestampToTime(t[length-2]);
        com3.innerHTML = localStorage.getItem(timestampToTime(t[length-3]));
        time3.innerHTML = timestampToTime(t[length-3]);
        text.value = null;
    }
</script>
</html>